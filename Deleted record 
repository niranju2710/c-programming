#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Define structure
struct Student {
    int rollNo;
    char name[50];
    int marks;
};

int main() {
    struct Student s;
    FILE *fp, *tempFile;
    int rollToDelete;
    int found = 0;

    // Open original file in read mode
    fp = fopen("students.txt", "r");
    if (fp == NULL) {
        printf("Error opening file.\n");
        exit(1);
    }

    // Open temporary file in write mode
    tempFile = fopen("temp.txt", "w");
    if (tempFile == NULL) {
        printf("Error creating temporary file.\n");
        fclose(fp);
        exit(1);
    }

    // Input roll number to delete
    printf("Enter Roll Number to delete: ");
    scanf("%d", &rollToDelete);

    // Copy all records except the one to delete
    while (fscanf(fp, "%d %s %d", &s.rollNo, s.name, &s.marks) != EOF) {
        if (s.rollNo != rollToDelete) {
            fprintf(tempFile, "%d %s %d\n", s.rollNo, s.name, s.marks);
        } else {
            found = 1;
        }
    }

    fclose(fp);
    fclose(tempFile);

    if (found) {
        // Remove original file and rename temporary file
        remove("students.txt");
        rename("temp.txt", "students.txt");
        printf("Record with Roll Number %d deleted successfully.\n", rollToDelete);
    } else {
        remove("temp.txt"); // Delete temporary file if record not found
        printf("Record with Roll Number %d not found.\n", rollToDelete);
    }

    return 0;
}